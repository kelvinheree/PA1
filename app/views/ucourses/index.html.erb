<% provide(:title, 'Search Courses') %>

<%= form_tag(ucourses_path, :method => "get", id: "search-form") do %>
<%= select_tag "browse", options_from_collection_for_select(Subject.all, "subject_id", "name", params[:browse]), {:include_blank => true}%>
<%= text_field_tag :search, params[:search], placeholder: "Search Posts" %>
<%= submit_tag "Search by Course Name" %>
<% end %>



<br>
<br>
<% if logged_in? %>
<% if @ucourse.blank? %>
<p>There are no courses containing the term(s)
    <%= params[:search] %>
    .</p>
<% else %>

<table>
    <thead>
        <tr>
            <th>Name</th>
            <th>Description</th>
            <th>Code</th>
            <th>Requirements</th>
            <th colspan="3"></th>
        </tr>
    </thead>

    <tbody>
        <% @ucourse.each do |course| %>
        <tr>
            <td><%= course.name %></td>
            <td><%= course.description %></td>
            <td><%= course.code %></td>
            <td><%= course.requirements %></td>
            <td><%= button_to "Enroll", { action: "enroll", id: course.id, name: course.name }
                                %></td>
        </tr>
        <% end %>
    </tbody>
</table>
<% end %>
<% else %>
<h2>You must log in or sign up first</h2>

<% end %>
